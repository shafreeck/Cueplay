@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 263.4 70% 50.4%;
    --primary-foreground: 210 40% 98%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 72.2% 50.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;
    --radius: 1rem;
  }

  /* Force dark mode by default for Cinematic feel, or keep .dark if user toggles. 
     But for this design style, we often want consistent dark mode. 
     We'll keep the variables consistent for now. */
  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    /* A slightly brighter purple for dark mode visibility if needed, but keeping consistent for now */
    --primary: 263.4 70% 50.4%;
    --primary-foreground: 210 40% 98%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 72.2% 50.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* Force center subtitles for WebKit/native players */
  video::cue {
    text-align: center;
    background-color: transparent;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  }

  video::-webkit-media-text-track-display {
    text-align: center !important;
    transform: translateX(-50%);
    left: 50% !important;
  }
}

@layer utilities {
  .glass {
    @apply bg-background/60 backdrop-blur-xl border border-white/10;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
  }

  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Aggressive mobile scrollbar hiding and viewport management */
@media (max-width: 768px) {

  html,
  body {
    overflow: hidden;
    height: 100%;
    width: 100%;
    /* manipulation allows single-finger panning and gestures like edge-swipe, but disables double-tap zoom, which speeds up tap response and allows our custom double-tap logic to work better */
    touch-action: manipulation;
  }

  /* Force video controls visibility and a solid primary color accent for the slider on iOS */
  video {
    accent-color: #7c3aed !important;
  }

  * {
    -ms-overflow-style: none !important;
    scrollbar-width: none !important;
    /* Prevent selection and callouts for a more native feel */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* Re-enable selection for inputs specifically */
  input,
  textarea {
    -webkit-user-select: text;
    user-select: text;
  }

  *::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
  }
}

@keyframes music-bar {

  0%,
  100% {
    height: 30%;
  }

  50% {
    height: 100%;
  }
}

.animate-music-bar {
  animation: music-bar 1s ease-in-out infinite;
}